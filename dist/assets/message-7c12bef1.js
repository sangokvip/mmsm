import{n as D,o as O,s as z,_ as u,v as _,a as p,u as B,p as E,a1 as G,a6 as Se,a7 as ue,j as t,a8 as Ie,q as U,t as V,a9 as re,aa as te,Q as Me,ab as $e,S as Re,ac as we,ad as Le,ae as Te,r as J,i as Y,c as ze,T as _e,B as X,A as qe,C as fe,b as Ne,d as ee,e as A,f as Pe,P as be,l as We,D as Ae,g as He,h as De,k as Oe,I as Be,m as Ee,R as Ue}from"./pixel-theme-548d9856.js";function Ve(e){return D("MuiFormControl",e)}O("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Ze=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Je=e=>{const{classes:r,margin:s,fullWidth:o}=e,d={root:["root",s!=="none"&&`margin${_(s)}`,o&&"fullWidth"]};return V(d,Ve,r)},Ye=z("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},r)=>u({},r.root,r[`margin${_(e.margin)}`],e.fullWidth&&r.fullWidth)})(({ownerState:e})=>u({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),Ke=p.forwardRef(function(r,s){const o=B({props:r,name:"MuiFormControl"}),{children:d,className:i,color:f="primary",component:c="div",disabled:n=!1,error:a=!1,focused:m,fullWidth:x=!1,hiddenLabel:v=!1,margin:y="none",required:b=!1,size:M="medium",variant:C="outlined"}=o,q=E(o,Ze),$=u({},o,{color:f,component:c,disabled:n,error:a,fullWidth:x,hiddenLabel:v,margin:y,required:b,size:M,variant:C}),N=Je($),[l,h]=p.useState(()=>{let I=!1;return d&&p.Children.forEach(d,j=>{if(!G(j,["Input","Select"]))return;const T=G(j,["Select"])?j.props.input:j;T&&Se(T.props)&&(I=!0)}),I}),[k,R]=p.useState(()=>{let I=!1;return d&&p.Children.forEach(d,j=>{G(j,["Input","Select"])&&(ue(j.props,!0)||ue(j.props.inputProps,!0))&&(I=!0)}),I}),[g,F]=p.useState(!1);n&&g&&F(!1);const L=m!==void 0&&!n?m:g;let S;const P=p.useMemo(()=>({adornedStart:l,setAdornedStart:h,color:f,disabled:n,error:a,filled:k,focused:L,fullWidth:x,hiddenLabel:v,size:M,onBlur:()=>{F(!1)},onEmpty:()=>{R(!1)},onFilled:()=>{R(!0)},onFocus:()=>{F(!0)},registerEffect:S,required:b,variant:C}),[l,f,n,a,k,L,x,v,S,b,M,C]);return t.jsx(Ie.Provider,{value:P,children:t.jsx(Ye,u({as:c,ownerState:$,className:U(N.root,i),ref:s},q,{children:d}))})}),Qe=Ke;function Ge(e){return D("MuiFormHelperText",e)}const Xe=O("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),pe=Xe;var me;const er=["children","className","component","disabled","error","filled","focused","margin","required","variant"],rr=e=>{const{classes:r,contained:s,size:o,disabled:d,error:i,filled:f,focused:c,required:n}=e,a={root:["root",d&&"disabled",i&&"error",o&&`size${_(o)}`,s&&"contained",c&&"focused",f&&"filled",n&&"required"]};return V(a,Ge,r)},tr=z("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:s}=e;return[r.root,s.size&&r[`size${_(s.size)}`],s.contained&&r.contained,s.filled&&r.filled]}})(({theme:e,ownerState:r})=>u({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${pe.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${pe.error}`]:{color:(e.vars||e).palette.error.main}},r.size==="small"&&{marginTop:4},r.contained&&{marginLeft:14,marginRight:14})),sr=p.forwardRef(function(r,s){const o=B({props:r,name:"MuiFormHelperText"}),{children:d,className:i,component:f="p"}=o,c=E(o,er),n=re(),a=te({props:o,muiFormControl:n,states:["variant","size","disabled","error","filled","focused","required"]}),m=u({},o,{component:f,contained:a.variant==="filled"||a.variant==="outlined",variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),x=rr(m);return t.jsx(tr,u({as:f,ownerState:m,className:U(x.root,i),ref:s},c,{children:d===" "?me||(me=t.jsx("span",{className:"notranslate",children:"​"})):d}))}),or=sr;function ar(e){return D("MuiFormLabel",e)}const nr=O("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),H=nr,lr=["children","className","color","component","disabled","error","filled","focused","required"],ir=e=>{const{classes:r,color:s,focused:o,disabled:d,error:i,filled:f,required:c}=e,n={root:["root",`color${_(s)}`,d&&"disabled",i&&"error",f&&"filled",o&&"focused",c&&"required"],asterisk:["asterisk",i&&"error"]};return V(n,ar,r)},dr=z("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},r)=>u({},r.root,e.color==="secondary"&&r.colorSecondary,e.filled&&r.filled)})(({theme:e,ownerState:r})=>u({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${H.focused}`]:{color:(e.vars||e).palette[r.color].main},[`&.${H.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${H.error}`]:{color:(e.vars||e).palette.error.main}})),cr=z("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,r)=>r.asterisk})(({theme:e})=>({[`&.${H.error}`]:{color:(e.vars||e).palette.error.main}})),ur=p.forwardRef(function(r,s){const o=B({props:r,name:"MuiFormLabel"}),{children:d,className:i,component:f="label"}=o,c=E(o,lr),n=re(),a=te({props:o,muiFormControl:n,states:["color","required","focused","disabled","error","filled"]}),m=u({},o,{color:a.color||"primary",component:f,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),x=ir(m);return t.jsxs(dr,u({as:f,ownerState:m,className:U(x.root,i),ref:s},c,{children:[d,a.required&&t.jsxs(cr,{ownerState:m,"aria-hidden":!0,className:x.asterisk,children:[" ","*"]})]}))}),fr=ur;function pr(e){return D("MuiInputLabel",e)}O("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const mr=["disableAnimation","margin","shrink","variant","className"],xr=e=>{const{classes:r,formControl:s,size:o,shrink:d,disableAnimation:i,variant:f,required:c}=e,n={root:["root",s&&"formControl",!i&&"animated",d&&"shrink",o&&o!=="normal"&&`size${_(o)}`,f],asterisk:[c&&"asterisk"]},a=V(n,pr,r);return u({},r,a)},br=z(fr,{shouldForwardProp:e=>Me(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:s}=e;return[{[`& .${H.asterisk}`]:r.asterisk},r.root,s.formControl&&r.formControl,s.size==="small"&&r.sizeSmall,s.shrink&&r.shrink,!s.disableAnimation&&r.animated,s.focused&&r.focused,r[s.variant]]}})(({theme:e,ownerState:r})=>u({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},r.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},r.size==="small"&&{transform:"translate(0, 17px) scale(1)"},r.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!r.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},r.variant==="filled"&&u({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},r.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},r.shrink&&u({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},r.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),r.variant==="outlined"&&u({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},r.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},r.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),hr=p.forwardRef(function(r,s){const o=B({name:"MuiInputLabel",props:r}),{disableAnimation:d=!1,shrink:i,className:f}=o,c=E(o,mr),n=re();let a=i;typeof a>"u"&&n&&(a=n.filled||n.focused||n.adornedStart);const m=te({props:o,muiFormControl:n,states:["size","variant","required","focused"]}),x=u({},o,{disableAnimation:d,formControl:n,shrink:a,size:m.size,variant:m.variant,required:m.required,focused:m.focused}),v=xr(x);return t.jsx(br,u({"data-shrink":a,ownerState:x,ref:s,className:U(v.root,f)},c,{classes:v}))}),gr=hr;function vr(e){return D("MuiTextField",e)}O("MuiTextField",["root"]);const Cr=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],jr={standard:we,filled:Le,outlined:Te},kr=e=>{const{classes:r}=e;return V({root:["root"]},vr,r)},yr=z(Qe,{name:"MuiTextField",slot:"Root",overridesResolver:(e,r)=>r.root})({}),Fr=p.forwardRef(function(r,s){const o=B({props:r,name:"MuiTextField"}),{autoComplete:d,autoFocus:i=!1,children:f,className:c,color:n="primary",defaultValue:a,disabled:m=!1,error:x=!1,FormHelperTextProps:v,fullWidth:y=!1,helperText:b,id:M,InputLabelProps:C,inputProps:q,InputProps:$,inputRef:N,label:l,maxRows:h,minRows:k,multiline:R=!1,name:g,onBlur:F,onChange:L,onFocus:S,placeholder:P,required:I=!1,rows:j,select:T=!1,SelectProps:K,type:je,value:le,variant:Z="outlined"}=o,ke=E(o,Cr),ie=u({},o,{autoFocus:i,color:n,disabled:m,error:x,fullWidth:y,multiline:R,required:I,select:T,variant:Z}),ye=kr(ie),W={};Z==="outlined"&&(C&&typeof C.shrink<"u"&&(W.notched=C.shrink),W.label=l),T&&((!K||!K.native)&&(W.id=void 0),W["aria-describedby"]=void 0);const w=$e(M),Q=b&&w?`${w}-helper-text`:void 0,de=l&&w?`${w}-label`:void 0,Fe=jr[Z],ce=t.jsx(Fe,u({"aria-describedby":Q,autoComplete:d,autoFocus:i,defaultValue:a,fullWidth:y,multiline:R,name:g,rows:j,maxRows:h,minRows:k,type:je,value:le,id:w,inputRef:N,onBlur:F,onChange:L,onFocus:S,placeholder:P,inputProps:q},W,$));return t.jsxs(yr,u({className:U(ye.root,c),disabled:m,error:x,fullWidth:y,ref:s,required:I,color:n,variant:Z,ownerState:ie},ke,{children:[l!=null&&l!==""&&t.jsx(gr,u({htmlFor:w,id:de},C,{children:l})),T?t.jsx(Re,u({"aria-describedby":Q,id:w,labelId:de,value:le,input:ce},K,{children:f})):ce,b&&t.jsx(or,u({id:Q},v,{children:b}))]}))}),xe=Fr;var se={},Sr=Y;Object.defineProperty(se,"__esModule",{value:!0});var he=se.default=void 0,Ir=Sr(J()),Mr=t;he=se.default=(0,Ir.default)((0,Mr.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");var oe={},$r=Y;Object.defineProperty(oe,"__esModule",{value:!0});var ge=oe.default=void 0,Rr=$r(J()),wr=t;ge=oe.default=(0,Rr.default)((0,wr.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var ae={},Lr=Y;Object.defineProperty(ae,"__esModule",{value:!0});var ve=ae.default=void 0,Tr=Lr(J()),zr=t;ve=ae.default=(0,Tr.default)((0,zr.jsx)("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}),"Login");var ne={},_r=Y;Object.defineProperty(ne,"__esModule",{value:!0});var Ce=ne.default=void 0,qr=_r(J()),Nr=t;Ce=ne.default=(0,qr.default)((0,Nr.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout");const Pr=ze({palette:{primary:{main:"#ff69b4",light:"#ff8dc3",dark:"#c13b86"},secondary:{main:"#4a148c",light:"#7c43bd",dark:"#12005e"},background:{default:"#fce4ec",paper:"#ffffff"}},typography:{fontFamily:'"Press Start 2P", cursive',h3:{fontWeight:700,color:"#ff69b4",textShadow:"2px 2px 0 #4a148c",textAlign:"center",marginBottom:"2rem"}},components:{MuiPaper:{styleOverrides:{root:{borderRadius:"12px",border:"4px solid #ff69b4",boxShadow:"4px 4px 0 rgba(74, 20, 140, 0.5)",transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-4px)"}}}},MuiButton:{styleOverrides:{root:{fontFamily:'"Press Start 2P", cursive',border:"3px solid #ff69b4",boxShadow:"3px 3px 0 rgba(74, 20, 140, 0.5)","&:hover":{transform:"translate(-2px, -2px)",boxShadow:"5px 5px 0 rgba(74, 20, 140, 0.5)"},"&:active":{transform:"translate(2px, 2px)",boxShadow:"1px 1px 0 rgba(74, 20, 140, 0.5)"}}}}}}),Wr=({message:e,onDelete:r,isOwner:s})=>t.jsxs(be,{className:"pixel-bubble",sx:{p:2,mb:2,maxWidth:"80%",position:"relative",animation:"float 3s ease-in-out infinite",animationDelay:`${Math.random()*2}s`,display:"flex",justifyContent:"space-between",alignItems:"center",gap:2},children:[t.jsx(ee,{variant:"body1",sx:{wordBreak:"break-word"},children:e}),s&&t.jsx(Be,{onClick:r,sx:{color:"#ff69b4","&:hover":{color:"#ff8dc3",transform:"scale(1.1)"}},children:t.jsx(ge,{})})]});function Ar(){const[e,r]=p.useState(()=>{const l=localStorage.getItem("messages");return l?JSON.parse(l):[{id:1,text:"想对主人说的话...",userId:"system",deleted:!1,originalText:"想对主人说的话..."},{id:2,text:"想对奴隶说的话...",userId:"system",deleted:!1,originalText:"想对奴隶说的话..."},{id:3,text:"想对玩伴说的话...",userId:"system",deleted:!1,originalText:"想对玩伴说的话..."}]}),[s,o]=p.useState(""),[d,i]=p.useState(!1),[f,c]=p.useState(""),[n,a]=p.useState(!1),[m,x]=p.useState(!1),[v,y]=p.useState(""),[b,M]=p.useState(null);p.useEffect(()=>{var h;let l=(h=document.cookie.match(/userId=([^;]+)/))==null?void 0:h[1];l||(l="user_"+Math.random().toString(36).substr(2,9),document.cookie=`userId=${l};path=/;max-age=31536000`),M(l)},[]),p.useEffect(()=>{localStorage.setItem("messages",JSON.stringify(e))},[e]);const C=l=>{if(l.preventDefault(),s.trim()){if(!(()=>{const g=JSON.parse(localStorage.getItem(`messageHistory_${b}`)||"[]"),F=Date.now(),L=F-24*60*60*1e3,S=g.filter(P=>P>L);return S.length>=3?(c("您已达到24小时内3条留言的限制，请稍后再试！"),i(!0),!1):(S.push(F),localStorage.setItem(`messageHistory_${b}`,JSON.stringify(S)),!0)})())return;const k=s.trim().replace(/\b(?!(?:${bdsm_terms.join('|')})\b)[a-zA-Z0-9]+(?:[-.s][a-zA-Z0-9]+)*\b/g,g=>/[0-9].*[a-zA-Z]|[a-zA-Z].*[0-9]/.test(g)||/^\d{6,}$/.test(g)||/^[a-zA-Z]{8,}$/.test(g)?"*".repeat(g.length):g),R={id:Date.now(),text:k,userId:b,deleted:!1,originalText:s.trim()};r([...e,R]),o(""),c("留言成功！"),i(!0)}},q=l=>{const h=e[l];if(!n&&h.userId!==b){c("只能删除自己的留言！"),i(!0);return}const k=[...e];k[l]={...h,deleted:!0},r(k),c("删除成功！"),i(!0)},$=()=>{v==="sangok33"?(a(!0),x(!1),y(""),c("管理员登录成功！"),i(!0)):(c("密码错误！"),i(!0))},N=()=>{a(!1),c("已退出管理员模式！"),i(!0)};return t.jsx(_e,{theme:Pr,children:t.jsxs(X,{sx:{minHeight:"100vh",backgroundColor:"background.default"},children:[t.jsx(qe,{position:"sticky",sx:{backgroundColor:"#fff0f5",border:"4px solid #ff69b4",borderBottom:"4px solid #ff69b4",boxShadow:"4px 4px 0 rgba(255, 105, 180, 0.5)",mb:3},className:"pixel-theme-pink",children:t.jsx(fe,{maxWidth:"lg",children:t.jsxs(Ne,{sx:{justifyContent:"space-between"},children:[t.jsx(ee,{variant:"h6",className:"pixel-title-pink",sx:{color:"#ff69b4"},children:"留言板"}),t.jsxs(X,{sx:{display:"flex",gap:2},children:[t.jsx(A,{color:"inherit",startIcon:n?t.jsx(Ce,{}):t.jsx(ve,{}),onClick:n?N:()=>x(!0),className:"pixel-button-pink",sx:{color:"#ff69b4"},children:n?"退出管理":"管理员登录"}),t.jsx(A,{color:"inherit",startIcon:t.jsx(Pe,{}),href:"/index.html",className:"pixel-button-pink",sx:{color:"#ff69b4"},children:"返回首页"})]})]})})}),t.jsxs(fe,{maxWidth:"md",sx:{pb:4,mb:10},children:[t.jsx(ee,{variant:"h3",className:"pixel-title-pink",children:"I Love Dirty Talk"}),t.jsx(X,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:2,alignItems:"start"},children:e.map((l,h)=>(!l.deleted||n)&&t.jsx(Wr,{message:n?l.originalText:l.text,onDelete:()=>q(h),isOwner:n||l.userId===b},h))})]}),t.jsxs(be,{component:"form",onSubmit:C,sx:{p:2,position:"fixed",bottom:0,left:0,right:0,display:"flex",gap:2,alignItems:"center",backgroundColor:"#fff0f5",zIndex:1e3,borderTop:"4px solid #ff69b4",boxShadow:"0 -4px 0 rgba(255, 105, 180, 0.5)"},className:"pixel-theme-pink",children:[t.jsx(xe,{fullWidth:!0,multiline:!0,rows:2,value:s,onChange:l=>o(l.target.value),placeholder:"说点什么...",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#ff69b4",borderWidth:"3px"},"&:hover fieldset":{borderColor:"#ff69b4"},"&.Mui-focused fieldset":{borderColor:"#ff69b4"}}}}),t.jsx(A,{type:"submit",variant:"contained",endIcon:t.jsx(he,{}),sx:{height:"100%",backgroundColor:"#ff69b4",color:"white","&:hover":{backgroundColor:"#ff8dc3"}},className:"pixel-button-pink",children:"发送"})]}),t.jsx("style",{jsx:!0,global:!0,children:`
          @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
          }
          .pixel-bubble {
            background-color: #fff0f5 !important;
          }
        `}),t.jsx(We,{open:d,autoHideDuration:3e3,onClose:()=>i(!1),message:f}),t.jsxs(Ae,{open:m,onClose:()=>x(!1),children:[t.jsx(He,{children:"管理员登录"}),t.jsx(De,{children:t.jsx(xe,{autoFocus:!0,margin:"dense",label:"密码",type:"password",fullWidth:!0,variant:"outlined",value:v,onChange:l=>y(l.target.value),onKeyPress:l=>l.key==="Enter"&&$()})}),t.jsxs(Oe,{children:[t.jsx(A,{onClick:()=>x(!1),children:"取消"}),t.jsx(A,{onClick:$,children:"登录"})]})]})]})})}Ee.createRoot(document.getElementById("root")).render(t.jsx(Ue.StrictMode,{children:t.jsx(Ar,{})}));
